<!DOCTYPE HTML>
<html lang="zh_CN" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <style>
            @view-transition {
                navigation: auto;
            }
            ::view-transition-old(root),
            ::view-transition-new(root) {
                animation-duration: 0.05s;
            }
        </style>
        <!-- Theme initialization - must run before any CSS loads to prevent flicker -->
        <script>
            (function() {
                var theme;
                try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
                if (theme === null || theme === undefined) {
                    theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
                }
                var html = document.documentElement;
                html.setAttribute('data-theme', theme);
                html.setAttribute('data-color-scheme', theme);
                html.className = theme;
            })();
        </script>
        <title>External Agents | Zed Code Editor Documentation</title>


        <!-- Custom HTML head -->
        <script type="text/javascript" src="../ltd-provenance.js"></script>
        <script type="text/javascript" src="../ltd-current.js"></script>
        <script type="text/javascript" src="../../../ltd-config.js"></script>
        <script type="text/javascript" src="../../../ltd-flyout.js"></script>

        <meta name="description" content="Learn how to use and customize Zed, the fast, collaborative code editor. Official docs on features, configuration, AI tools, and workflows.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/page-toc.css">
        <link rel="stylesheet" href="../theme/plugins.css">
        <link rel="stylesheet" href="../theme/highlight.css">

    </head>
    <body class="no-js">
    <div id="body-container">
        <div class="noise-pattern" style="background-image: url('https://cdn.zed.dev/images/noise.png');"></div>

        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
            // Mark as JS-enabled
            document.body.classList.remove('no-js');
            document.body.classList.add('js');
        </script>

        <header class="header-bar">
            <div class="left-container">
                <a href="/" class="logo-nav">
                    <img src="https://zed.dev/logo_icon.webp" class="icon-logo-img" alt="Zed Industries" style="height: 26px;">
                </a>
                <button id="sidebar-toggle" class="icon-button ib-hidden-desktop" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar" aria-expanded="false">
                    <i class="fa fa-bars"></i>
                </button>
            </div>
            <button id="search-toggle" class="search-button" type="button" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                <i class="icon fa fa-search"></i>
                <span class="search-content-desktop">
                    <span class="placeholder">Search docs…</span>
                    <kbd>S</kbd>
                </span>
                <span class="search-content-mobile">
                    <span class="placeholder">Search…</span>
                </span>
            </button>
            <div class="right-container">
                <button id="theme-toggle" class="icon-button" type="button" title="Change Theme" aria-label="Change Theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                    <i class="fa fa-paint-brush"></i>
                </button>

                <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                    <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                    <li role="none"><button role="menuitem" class="theme" id="dark">Dark</button></li>
                </ul>

                <button id="copy-markdown-toggle" class="icon-button ib-hidden-mobile" type="button" title="Copy Page as Markdown" aria-label="Copy page as markdown">
                    <i class="fa fa-copy"></i>
                </button>

                <a class="download-button" href="https://zed.dev/download" title="Download Zed" aria-label="Download Zed">
                    Download
                </a>
            </div>
        </header>

        <div id="page-wrapper" class="page-wrapper">

            <div class="search-container">
                <div id="search-wrapper" class="search-modal hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search…" aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
            </div>

            <nav id="sidebar" class="sidebar" aria-label="Table of contents">
                <div class="sidebar-scrollbox">
                    <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Welcome</li><li class="chapter-item expanded "><a href="../getting-started.html">Getting Started</a></li><li class="chapter-item expanded "><a href="../installation.html">Installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../update.html">Update</a></li><li class="chapter-item expanded "><a href="../uninstall.html">Uninstall</a></li></ol></li><li class="chapter-item expanded "><a href="../authentication.html">Authenticate</a></li><li class="chapter-item expanded "><a href="../telemetry.html">Telemetry</a></li><li class="chapter-item expanded "><a href="../troubleshooting.html">Troubleshooting</a></li><li class="chapter-item expanded affix "><li class="part-title">Configuration</li><li class="chapter-item expanded "><a href="../configuring-zed.html">Configuring Zed</a></li><li class="chapter-item expanded "><a href="../configuring-languages.html">Configuring Languages</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../toolchains.html">Toolchains</a></li></ol></li><li class="chapter-item expanded "><a href="../key-bindings.html">Key bindings</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../all-actions.html">All Actions</a></li></ol></li><li class="chapter-item expanded "><a href="../snippets.html">Snippets</a></li><li class="chapter-item expanded "><a href="../themes.html">Themes</a></li><li class="chapter-item expanded "><a href="../icon-themes.html">Icon Themes</a></li><li class="chapter-item expanded "><a href="../visual-customization.html">Visual Customization</a></li><li class="chapter-item expanded "><a href="../vim.html">Vim Mode</a></li><li class="chapter-item expanded "><a href="../helix.html">Helix Mode</a></li><li class="chapter-item expanded "><a href="../ai/privacy-and-security.html">Privacy and Security</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../worktree-trust.html">Worktree Trust</a></li><li class="chapter-item expanded "><a href="../ai/ai-improvement.html">AI Improvement</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Using Zed</li><li class="chapter-item expanded "><a href="../multibuffers.html">Multibuffers</a></li><li class="chapter-item expanded "><a href="../command-palette.html">Command Palette</a></li><li class="chapter-item expanded "><a href="../command-line-interface.html">Command-line Interface</a></li><li class="chapter-item expanded "><a href="../outline-panel.html">Outline Panel</a></li><li class="chapter-item expanded "><a href="../completions.html">Code Completions</a></li><li class="chapter-item expanded "><a href="../collaboration/overview.html">Collaboration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../collaboration/channels.html">Channels</a></li><li class="chapter-item expanded "><a href="../collaboration/contacts-and-private-calls.html">Contacts and Private Calls</a></li></ol></li><li class="chapter-item expanded "><a href="../git.html">Git</a></li><li class="chapter-item expanded "><a href="../debugger.html">Debugger</a></li><li class="chapter-item expanded "><a href="../diagnostics.html">Diagnostics</a></li><li class="chapter-item expanded "><a href="../tasks.html">Tasks</a></li><li class="chapter-item expanded "><a href="../tab-switcher.html">Tab Switcher</a></li><li class="chapter-item expanded "><a href="../remote-development.html">Remote Development</a></li><li class="chapter-item expanded "><a href="../dev-containers.html">Dev Containers</a></li><li class="chapter-item expanded "><a href="../environment.html">Environment Variables</a></li><li class="chapter-item expanded "><a href="../repl.html">REPL</a></li><li class="chapter-item expanded affix "><li class="part-title">Platform Support</li><li class="chapter-item expanded "><a href="../windows.html">Windows</a></li><li class="chapter-item expanded "><a href="../linux.html">Linux</a></li><li class="chapter-item expanded affix "><li class="part-title">AI</li><li class="chapter-item expanded "><a href="../ai/overview.html">Overview</a></li><li class="chapter-item expanded "><a href="../ai/agent-panel.html">Agent Panel</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ai/tools.html">Tools</a></li><li class="chapter-item expanded "><a href="../ai/external-agents.html" class="active">External Agents</a></li></ol></li><li class="chapter-item expanded "><a href="../ai/inline-assistant.html">Inline Assistant</a></li><li class="chapter-item expanded "><a href="../ai/edit-prediction.html">Edit Prediction</a></li><li class="chapter-item expanded "><a href="../ai/text-threads.html">Text Threads</a></li><li class="chapter-item expanded "><a href="../ai/rules.html">Rules</a></li><li class="chapter-item expanded "><a href="../ai/mcp.html">Model Context Protocol</a></li><li class="chapter-item expanded "><a href="../ai/configuration.html">Configuration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ai/llm-providers.html">LLM Providers</a></li><li class="chapter-item expanded "><a href="../ai/agent-settings.html">Agent Settings</a></li></ol></li><li class="chapter-item expanded "><a href="../ai/subscription.html">Subscription</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../ai/models.html">Models</a></li><li class="chapter-item expanded "><a href="../ai/plans-and-usage.html">Plans and Usage</a></li><li class="chapter-item expanded "><a href="../ai/billing.html">Billing</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Extensions</li><li class="chapter-item expanded "><a href="../extensions.html">Overview</a></li><li class="chapter-item expanded "><a href="../extensions/installing-extensions.html">Installing Extensions</a></li><li class="chapter-item expanded "><a href="../extensions/developing-extensions.html">Developing Extensions</a></li><li class="chapter-item expanded "><a href="../extensions/capabilities.html">Extension Capabilities</a></li><li class="chapter-item expanded "><a href="../extensions/languages.html">Language Extensions</a></li><li class="chapter-item expanded "><a href="../extensions/debugger-extensions.html">Debugger Extensions</a></li><li class="chapter-item expanded "><a href="../extensions/themes.html">Theme Extensions</a></li><li class="chapter-item expanded "><a href="../extensions/icon-themes.html">Icon Theme Extensions</a></li><li class="chapter-item expanded "><a href="../extensions/slash-commands.html">Slash Command Extensions</a></li><li class="chapter-item expanded "><a href="../extensions/agent-servers.html">Agent Server Extensions</a></li><li class="chapter-item expanded "><a href="../extensions/mcp-extensions.html">MCP Server Extensions</a></li><li class="chapter-item expanded affix "><li class="part-title">Coming From...</li><li class="chapter-item expanded "><a href="../migrate/vs-code.html">VS Code</a></li><li class="chapter-item expanded "><a href="../migrate/intellij.html">IntelliJ IDEA</a></li><li class="chapter-item expanded "><a href="../migrate/pycharm.html">PyCharm</a></li><li class="chapter-item expanded "><a href="../migrate/webstorm.html">WebStorm</a></li><li class="chapter-item expanded "><a href="../migrate/rustrover.html">RustRover</a></li><li class="chapter-item expanded affix "><li class="part-title">Language Support</li><li class="chapter-item expanded "><a href="../languages.html">All Languages</a></li><li class="chapter-item expanded "><a href="../languages/ansible.html">Ansible</a></li><li class="chapter-item expanded "><a href="../languages/asciidoc.html">AsciiDoc</a></li><li class="chapter-item expanded "><a href="../languages/astro.html">Astro</a></li><li class="chapter-item expanded "><a href="../languages/bash.html">Bash</a></li><li class="chapter-item expanded "><a href="../languages/biome.html">Biome</a></li><li class="chapter-item expanded "><a href="../languages/c.html">C</a></li><li class="chapter-item expanded "><a href="../languages/cpp.html">C++</a></li><li class="chapter-item expanded "><a href="../languages/csharp.html">C#</a></li><li class="chapter-item expanded "><a href="../languages/clojure.html">Clojure</a></li><li class="chapter-item expanded "><a href="../languages/css.html">CSS</a></li><li class="chapter-item expanded "><a href="../languages/dart.html">Dart</a></li><li class="chapter-item expanded "><a href="../languages/deno.html">Deno</a></li><li class="chapter-item expanded "><a href="../languages/diff.html">Diff</a></li><li class="chapter-item expanded "><a href="../languages/docker.html">Docker</a></li><li class="chapter-item expanded "><a href="../languages/elixir.html">Elixir</a></li><li class="chapter-item expanded "><a href="../languages/elm.html">Elm</a></li><li class="chapter-item expanded "><a href="../languages/emmet.html">Emmet</a></li><li class="chapter-item expanded "><a href="../languages/erlang.html">Erlang</a></li><li class="chapter-item expanded "><a href="../languages/fish.html">Fish</a></li><li class="chapter-item expanded "><a href="../languages/gdscript.html">GDScript</a></li><li class="chapter-item expanded "><a href="../languages/gleam.html">Gleam</a></li><li class="chapter-item expanded "><a href="../languages/glsl.html">GLSL</a></li><li class="chapter-item expanded "><a href="../languages/go.html">Go</a></li><li class="chapter-item expanded "><a href="../languages/groovy.html">Groovy</a></li><li class="chapter-item expanded "><a href="../languages/haskell.html">Haskell</a></li><li class="chapter-item expanded "><a href="../languages/helm.html">Helm</a></li><li class="chapter-item expanded "><a href="../languages/html.html">HTML</a></li><li class="chapter-item expanded "><a href="../languages/java.html">Java</a></li><li class="chapter-item expanded "><a href="../languages/javascript.html">JavaScript</a></li><li class="chapter-item expanded "><a href="../languages/julia.html">Julia</a></li><li class="chapter-item expanded "><a href="../languages/json.html">JSON</a></li><li class="chapter-item expanded "><a href="../languages/jsonnet.html">Jsonnet</a></li><li class="chapter-item expanded "><a href="../languages/kotlin.html">Kotlin</a></li><li class="chapter-item expanded "><a href="../languages/lua.html">Lua</a></li><li class="chapter-item expanded "><a href="../languages/luau.html">Luau</a></li><li class="chapter-item expanded "><a href="../languages/makefile.html">Makefile</a></li><li class="chapter-item expanded "><a href="../languages/markdown.html">Markdown</a></li><li class="chapter-item expanded "><a href="../languages/nim.html">Nim</a></li><li class="chapter-item expanded "><a href="../languages/ocaml.html">OCaml</a></li><li class="chapter-item expanded "><a href="../languages/opentofu.html">OpenTofu</a></li><li class="chapter-item expanded "><a href="../languages/php.html">PHP</a></li><li class="chapter-item expanded "><a href="../languages/powershell.html">PowerShell</a></li><li class="chapter-item expanded "><a href="../languages/prisma.html">Prisma</a></li><li class="chapter-item expanded "><a href="../languages/proto.html">Proto</a></li><li class="chapter-item expanded "><a href="../languages/purescript.html">PureScript</a></li><li class="chapter-item expanded "><a href="../languages/python.html">Python</a></li><li class="chapter-item expanded "><a href="../languages/r.html">R</a></li><li class="chapter-item expanded "><a href="../languages/rego.html">Rego</a></li><li class="chapter-item expanded "><a href="../languages/rst.html">ReStructuredText</a></li><li class="chapter-item expanded "><a href="../languages/racket.html">Racket</a></li><li class="chapter-item expanded "><a href="../languages/roc.html">Roc</a></li><li class="chapter-item expanded "><a href="../languages/ruby.html">Ruby</a></li><li class="chapter-item expanded "><a href="../languages/rust.html">Rust</a></li><li class="chapter-item expanded "><a href="../languages/scala.html">Scala</a></li><li class="chapter-item expanded "><a href="../languages/scheme.html">Scheme</a></li><li class="chapter-item expanded "><a href="../languages/sh.html">Shell Script</a></li><li class="chapter-item expanded "><a href="../languages/sql.html">SQL</a></li><li class="chapter-item expanded "><a href="../languages/svelte.html">Svelte</a></li><li class="chapter-item expanded "><a href="../languages/swift.html">Swift</a></li><li class="chapter-item expanded "><a href="../languages/tailwindcss.html">Tailwind CSS</a></li><li class="chapter-item expanded "><a href="../languages/terraform.html">Terraform</a></li><li class="chapter-item expanded "><a href="../languages/toml.html">TOML</a></li><li class="chapter-item expanded "><a href="../languages/typescript.html">TypeScript</a></li><li class="chapter-item expanded "><a href="../languages/uiua.html">Uiua</a></li><li class="chapter-item expanded "><a href="../languages/vue.html">Vue</a></li><li class="chapter-item expanded "><a href="../languages/xml.html">XML</a></li><li class="chapter-item expanded "><a href="../languages/yaml.html">YAML</a></li><li class="chapter-item expanded "><a href="../languages/yara.html">Yara</a></li><li class="chapter-item expanded "><a href="../languages/yarn.html">Yarn</a></li><li class="chapter-item expanded "><a href="../languages/zig.html">Zig</a></li><li class="chapter-item expanded affix "><li class="part-title">Developing Zed</li><li class="chapter-item expanded "><a href="../development.html">Developing Zed</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../development/macos.html">macOS</a></li><li class="chapter-item expanded "><a href="../development/linux.html">Linux</a></li><li class="chapter-item expanded "><a href="../development/windows.html">Windows</a></li><li class="chapter-item expanded "><a href="../development/freebsd.html">FreeBSD</a></li><li class="chapter-item expanded "><a href="../development/debuggers.html">Using Debuggers</a></li><li class="chapter-item expanded "><a href="../performance.html">Performance</a></li><li class="chapter-item expanded "><a href="../development/glossary.html">Glossary</a></li></ol></li><li class="chapter-item expanded "><a href="../development/release-notes.html">Release Notes</a></li><li class="chapter-item expanded "><a href="../development/debugging-crashes.html">Debugging Crashes</a></li></ol>
                </div>
                <div style="display: none;" id="sidebar-resize-handle" class="sidebar-resize-handle">
                    <div class="sidebar-resize-indicator"></div>
                </div>
            </nav>

            <!-- Mobile sidebar toggle -->
            <script>
                (function() {
                    var sidebarToggle = document.getElementById('sidebar-toggle');
                    var sidebar = document.getElementById('sidebar');

                    sidebarToggle.addEventListener('click', function() {
                        var isOpen = document.body.classList.toggle('sidebar-open');
                        sidebarToggle.setAttribute('aria-expanded', isOpen);
                        sidebar.setAttribute('aria-hidden', !isOpen);
                    });

                    // Close sidebar when clicking a link inside it (on mobile)
                    sidebar.addEventListener('click', function(e) {
                        if (e.target.tagName === 'A' && window.innerWidth < 620) {
                            document.body.classList.remove('sidebar-open');
                            sidebarToggle.setAttribute('aria-expanded', 'false');
                            sidebar.setAttribute('aria-hidden', 'true');
                        }
                    });
                })();
            </script>

            <!-- Search backdrop handlers -->
            <script>
                (function() {
                    var searchWrapper = document.getElementById('search-wrapper');
                    var searchContainer = document.querySelector('.search-container');
                    var searchResults = document.getElementById('searchresults');

                    if (!searchWrapper || !searchContainer) return;

                    searchContainer.addEventListener('click', function(e) {
                        if (e.target === searchContainer) {
                            searchWrapper.classList.add('hidden');
                        }
                    });

                    if (searchResults) {
                        searchResults.addEventListener('click', function(e) {
                            if (e.target.tagName === 'A' || e.target.closest('a')) {
                                searchWrapper.classList.add('hidden');
                            }
                        });
                    }
                })();
            </script>

            <!-- Insert section spacers and apply collapsed state before scroll restoration to prevent layout shift/flicker -->
            <script>
                (function() {
                    var chapterList = document.querySelector('#sidebar ol.chapter');
                    if (!chapterList) return;

                    var collapsedSections = [];
                    try {
                        var stored = sessionStorage.getItem('sidebar-collapsed-sections');
                        if (stored) {
                            collapsedSections = JSON.parse(stored);
                        }
                    } catch (e) {}

                    var partTitles = chapterList.querySelectorAll('li.part-title');
                    var previousPartTitle = null;

                    partTitles.forEach(function(partTitle, index) {
                        partTitle._sectionName = partTitle.textContent.trim();

                        // Insert a spacer before this part-title (except for the first one)
                        if (index > 0) {
                            var spacer = document.createElement('li');
                            spacer.className = 'section-spacer';
                            partTitle.parentNode.insertBefore(spacer, partTitle);

                            if (previousPartTitle) {
                                previousPartTitle._spacerAfter = spacer;
                            }
                        }

                        var isCollapsed = collapsedSections.includes(partTitle._sectionName);
                        if (isCollapsed) {
                            // Hide all siblings until next part-title
                            var sibling = partTitle.nextElementSibling;
                            while (sibling && !sibling.classList.contains('part-title')) {
                                sibling.classList.add('section-hidden');
                                sibling = sibling.nextElementSibling;
                            }
                            // Hide the spacer after this section (will be set on next iteration)
                            partTitle._isCollapsed = true;
                        }

                        // If previous section was collapsed, hide its spacer
                        if (previousPartTitle && previousPartTitle._isCollapsed && previousPartTitle._spacerAfter) {
                            previousPartTitle._spacerAfter.classList.add('section-hidden');
                        }

                        previousPartTitle = partTitle;
                    });

                    // Handle the last section's spacer if it was collapsed
                    if (previousPartTitle && previousPartTitle._isCollapsed && previousPartTitle._spacerAfter) {
                        previousPartTitle._spacerAfter.classList.add('section-hidden');
                    }
                })();
            </script>

            <!-- Track and set sidebar scroll position -->
            <script>
                var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
                sidebarScrollbox.addEventListener('click', function(e) {
                    if (e.target.tagName === 'A') {
                        sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                    }
                }, { passive: true });
                var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
                sessionStorage.removeItem('sidebar-scroll');
                if (sidebarScrollTop) {
                    // preserve sidebar scroll position when navigating via links within sidebar
                    sidebarScrollbox.scrollTop = sidebarScrollTop;
                } else {
                    // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                    var activeSection = document.querySelector('#sidebar .active');
                    if (activeSection) {
                        activeSection.scrollIntoView({ block: 'center' });
                    }
                }
            </script>

            <div class="page">
                <div id="content" class="content">
                    <main>
                      <h1 id="external-agents"><a class="header" href="#external-agents">External Agents</a></h1>
<p>Zed supports terminal-based agents through the <a href="https://agentclientprotocol.com">Agent Client Protocol (ACP)</a>.</p>
<p>Currently, <a href="https://github.com/google-gemini/gemini-cli">Gemini CLI</a> serves as the reference implementation. <a href="https://www.anthropic.com/claude-code">Claude Code</a> and <a href="https://developers.openai.com/codex">Codex</a> are also included by default, and you can <a href="#add-more-agents">add custom ACP-compatible agents</a> as well.</p>
<blockquote>
<p>Note that Zed's affordance for external agents is strictly UI-based; the billing and legal/terms arrangement is directly between you and the agent provider. Zed does not charge for use of external agents, and our <a href="./ai-improvement.html">zero-data retention agreements/privacy guarantees</a> are <strong><em>only</em></strong> applicable for Zed's hosted models.</p>
</blockquote>
<h2 id="gemini-cli"><a class="header" href="#gemini-cli">Gemini CLI</a></h2>
<p>Zed provides the ability to run <a href="https://github.com/google-gemini/gemini-cli">Gemini CLI</a> directly in the <a href="./agent-panel.html">agent panel</a>.</p>
<p>Under the hood we run Gemini CLI in the background, and talk to it over ACP. This means that you're running the real Gemini CLI, with all of the advantages of that, but you can see and interact with files in your editor.</p>
<h3 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h3>
<p>As of <a href="https://zed.dev/releases/stable/0.201.5">Zed Stable v0.201.5</a> you should be able to use Gemini CLI directly from Zed. First open the agent panel with <kbd class="keybinding">cmd-?|ctrl-?</kbd>, and then use the <code>+</code> button in the top right to start a new Gemini CLI thread.</p>
<p>If you'd like to bind this to a keyboard shortcut, you can do so by editing your <code>keymap.json</code> file via the <code>zed: open keymap</code> command to include:</p>
<pre><code class="language-json">[
  {
    "bindings": {
      "cmd-alt-g": ["agent::NewExternalAgentThread", { "agent": "gemini" }]
    }
  }
]
</code></pre>
<h4 id="installation"><a class="header" href="#installation">Installation</a></h4>
<p>The first time you create a Gemini CLI thread, Zed will install <a href="https://github.com/google-gemini/gemini-cli">@google/gemini-cli</a>. This installation is only available to Zed and is kept up to date as you use the agent.</p>
<p>By default, Zed will use this managed version of Gemini CLI even if you have it installed globally. However, you can configure it to use a version in your <code>PATH</code> by adding this to your settings:</p>
<pre><code class="language-json">{
  "agent_servers": {
    "gemini": {
      "ignore_system_version": false
    }
  }
}
</code></pre>
<h4 id="authentication"><a class="header" href="#authentication">Authentication</a></h4>
<p>After you have Gemini CLI running, you'll be prompted to choose your authentication method.</p>
<p>Most users should click the "Log in with Google". This will cause a browser window to pop-up and auth directly with Gemini CLI. Zed does not see your OAuth or access tokens in this case.</p>
<p>You can also use the "Gemini API Key". If you select this, and have the <code>GEMINI_API_KEY</code> set, then we will use that. Otherwise Zed will prompt you for an API key which will be stored securely in your keychain, and used to start Gemini CLI from within Zed.</p>
<p>The "Vertex AI" option is for those who are using <a href="https://cloud.google.com/vertex-ai">Vertex AI</a>, and have already configured their environment correctly.</p>
<p>For more information, see the <a href="https://github.com/google-gemini/gemini-cli/blob/main/docs/index.md">Gemini CLI docs</a>.</p>
<h3 id="usage"><a class="header" href="#usage">Usage</a></h3>
<p>Similar to Zed's first-party agent, you can use Gemini CLI to do anything that you need. And to give it context, you can @-mention files, recent threads, symbols, or fetch the web.</p>
<blockquote>
<p>Note that some first-party agent features don't yet work with Gemini CLI: editing past messages, resuming threads from history, and checkpointing. We hope to add these features in the near future.</p>
</blockquote>
<h2 id="claude-code"><a class="header" href="#claude-code">Claude Code</a></h2>
<p>Similar to Gemini CLI, you can also run <a href="https://www.anthropic.com/claude-code">Claude Code</a> directly via Zed's <a href="./agent-panel.html">agent panel</a>. Under the hood, Zed runs Claude Code and communicate to it over ACP, through <a href="https://github.com/zed-industries/claude-code-acp">a dedicated adapter</a>.</p>
<h3 id="getting-started-1"><a class="header" href="#getting-started-1">Getting Started</a></h3>
<p>Open the agent panel with <kbd class="keybinding">cmd-?|ctrl-?</kbd>, and then use the <code>+</code> button in the top right to start a new Claude Code thread.</p>
<p>If you'd like to bind this to a keyboard shortcut, you can do so by editing your <code>keymap.json</code> file via the <code>zed: open keymap</code> command to include:</p>
<pre><code class="language-json">[
  {
    "bindings": {
      "cmd-alt-c": ["agent::NewExternalAgentThread", { "agent": "claude_code" }]
    }
  }
]
</code></pre>
<h3 id="authentication-1"><a class="header" href="#authentication-1">Authentication</a></h3>
<p>As of version <code>0.202.7</code> (stable) and <code>0.203.2</code> (preview), authentication to Zed's Claude Code installation is decoupled entirely from Zed's agent. That is to say, an Anthropic API key added via the <a href="./llm-providers.html#anthropic">Zed Agent's settings</a> will <em>not</em> be utilized by Claude Code for authentication and billing.</p>
<p>To ensure you're using your billing method of choice, <a href="./agent-panel.html#new-thread">open a new Claude Code thread</a>. Then, run <code>/login</code>, and authenticate either via API key, or via <code>Log in with Claude Code</code> to use a Claude Pro/Max subscription.</p>
<h4 id="installation-1"><a class="header" href="#installation-1">Installation</a></h4>
<p>The first time you create a Claude Code thread, Zed will install <a href="https://github.com/zed-industries/claude-code-acp">@zed-industries/claude-code-acp</a>. This installation is only available to Zed and is kept up to date as you use the agent.</p>
<p>Zed will always use this managed version of the Claude Code adapter, which includes a vendored version of the Claude Code CLI, even if you have it installed globally.</p>
<p>If you want to override the executable used by the adapter, you can set the <code>CLAUDE_CODE_EXECUTABLE</code> environment variable in your settings to the path of your preferred executable.</p>
<pre><code class="language-json">{
  "agent_servers": {
    "claude": {
      "env": {
        "CLAUDE_CODE_EXECUTABLE": "/path/to/alternate-claude-code-executable"
      }
    }
  }
}
</code></pre>
<h3 id="usage-1"><a class="header" href="#usage-1">Usage</a></h3>
<p>Similar to Zed's first-party agent, you can use Claude Code to do anything that you need. And to give it context, you can @-mention files, recent threads, symbols, or fetch the web.</p>
<p>In complement to talking to it <a href="https://agentclientprotocol.com">over ACP</a>, Zed relies on the <a href="https://docs.anthropic.com/en/docs/claude-code/sdk/sdk-overview">Claude Code SDK</a> to support some of its specific features. However, the SDK doesn't yet expose everything needed to fully support all of them:</p>
<ul>
<li>Slash Commands: A subset of <a href="https://docs.anthropic.com/en/docs/claude-code/slash-commands#built-in-slash-commands">built-in commands</a> are supported, while <a href="https://docs.anthropic.com/en/docs/claude-code/slash-commands#custom-slash-commands">custom slash commands</a> are fully supported.</li>
<li><a href="https://docs.anthropic.com/en/docs/claude-code/sub-agents">Subagents</a> are supported.</li>
<li><a href="https://docs.anthropic.com/en/docs/claude-code/hooks-guide">Hooks</a> are currently <em>not</em> supported.</li>
</ul>
<blockquote>
<p>Also note that some <a href="./agent-panel.html">first-party agent</a> features don't yet work with Claude Code: editing past messages, resuming threads from history, and checkpointing. We hope to add these features in the near future.</p>
</blockquote>
<h4 id="claudemd"><a class="header" href="#claudemd">CLAUDE.md</a></h4>
<p>Claude Code in Zed will automatically use any <code>CLAUDE.md</code> file found in your project root, project subdirectories, or root <code>.claude</code> directory.</p>
<p>If you don't have a <code>CLAUDE.md</code> file, you can ask Claude Code to create one for you through the <code>init</code> slash command.</p>
<h2 id="codex-cli"><a class="header" href="#codex-cli">Codex CLI</a></h2>
<p>You can also run <a href="https://github.com/openai/codex">Codex CLI</a> directly via Zed's <a href="./agent-panel.html">agent panel</a>. Under the hood, Zed runs Codex CLI and communicates to it over ACP, through <a href="https://github.com/zed-industries/codex-acp">a dedicated adapter</a>.</p>
<h3 id="getting-started-2"><a class="header" href="#getting-started-2">Getting Started</a></h3>
<p>As of Zed Stable v0.208 you should be able to use Codex directly from Zed. Open the agent panel with <kbd class="keybinding">cmd-?|ctrl-?</kbd>, and then use the <code>+</code> button in the top right to start a new Codex thread.</p>
<p>If you'd like to bind this to a keyboard shortcut, you can do so by editing your <code>keymap.json</code> file via the <code>zed: open keymap</code> command to include:</p>
<pre><code class="language-json">[
  {
    "bindings": {
      "cmd-alt-c": ["agent::NewExternalAgentThread", { "agent": "codex" }]
    }
  }
]
</code></pre>
<h3 id="authentication-2"><a class="header" href="#authentication-2">Authentication</a></h3>
<p>Authentication to Zed's Codex installation is decoupled entirely from Zed's agent. That is to say, an OpenAI API key added via the <a href="./llm-providers.html#openai">Zed Agent's settings</a> will <em>not</em> be utilized by Codex for authentication and billing.</p>
<p>To ensure you're using your billing method of choice, <a href="./agent-panel.html#new-thread">open a new Codex thread</a>. The first time you will be prompted to authenticate with one of three methods:</p>
<ol>
<li>Login with ChatGPT - allows you to use your existing, paid ChatGPT subscription. <em>Note: This method isn't currently supported in remote projects</em></li>
<li><code>CODEX_API_KEY</code> - uses an API key you have set in your environment under the variable <code>CODEX_API_KEY</code>.</li>
<li><code>OPENAI_API_KEY</code> - uses an API key you have set in your environment under the variable <code>OPENAI_API_KEY</code>.</li>
</ol>
<p>If you are already logged in and want to change your authentication method, type <code>/logout</code> in the thread and authenticate again.</p>
<p>If you want to use a third-party provider with Codex, you can configure that with your <a href="https://github.com/openai/codex/blob/main/docs/config.md#model-selection">Codex config.toml</a> or pass extra <a href="https://github.com/openai/codex/blob/main/docs/config.md#model-selection">args/env variables</a> to your Codex agent servers settings.</p>
<h4 id="installation-2"><a class="header" href="#installation-2">Installation</a></h4>
<p>The first time you create a Codex thread, Zed will install <a href="https://github.com/zed-industries/codex-acp">codex-acp</a>. This installation is only available to Zed and is kept up to date as you use the agent.</p>
<p>Zed will always use this managed version of Codex even if you have it installed globally.</p>
<h3 id="usage-2"><a class="header" href="#usage-2">Usage</a></h3>
<p>Similar to Zed's first-party agent, you can use Codex to do anything that you need. And to give it context, you can @-mention files, symbols, or fetch the web.</p>
<blockquote>
<p>Note that some first-party agent features don't yet work with Codex: editing past messages, resuming threads from history, and checkpointing. We hope to add these features in the near future.</p>
</blockquote>
<h2 id="add-more-agents"><a class="header" href="#add-more-agents">Add More Agents</a></h2>
<p>Add more external agents to Zed by installing <a href="../extensions/agent-servers.html">Agent Server extensions</a>.</p>
<p>See what agents are available by filtering for "Agent Servers" in the extensions page, which you can access via the command palette with <code>zed: extensions</code>, or the <a href="https://zed.dev/extensions?filter=agent-servers">Zed website</a>.</p>
<p>You can also add agents through your <code>settings.json</code>, by specifying certain fields under <code>agent_servers</code>, like so:</p>
<pre><code class="language-json">{
  "agent_servers": {
    "My Custom Agent": {
      "type": "custom",
      "command": "node",
      "args": ["~/projects/agent/index.js", "--acp"],
      "env": {}
    }
  }
}
</code></pre>
<p>This can be useful if you're in the middle of developing a new agent that speaks the protocol and you want to debug it.</p>
<p>It's also possible to specify a custom path, arguments, or environment for the builtin integrations by using the <code>claude</code> and <code>gemini</code> names.</p>
<h3 id="custom-keybinding-for-extension-based-agents"><a class="header" href="#custom-keybinding-for-extension-based-agents">Custom Keybinding For Extension-Based Agents</a></h3>
<p>To assign a custom keybinding to start a new thread for agents that were added by installing agent server extensions, add the following snippet to your <code>keymap.json</code> file:</p>
<pre><code class="language-json">{
  "bindings": {
    "cmd-alt-n": [ // Your custom keybinding
      "agent::NewExternalAgentThread",
      {
        "agent": {
          "custom": {
            "name": "My Agent", // The agent name as it appears in the UI (e.g., "OpenCode", "Auggie CLI", etc.)
            "command": {
              "command": "my-agent", // The agent name in lowercase with no spaces
              "args": ["acp"]
            }
          }
        }
      }
    ]
  }
},
</code></pre>
<h2 id="debugging-agents"><a class="header" href="#debugging-agents">Debugging Agents</a></h2>
<p>When using external agents in Zed, you can access the debug view via with <code>dev: open acp logs</code> from the Command Palette. This lets you see the messages being sent and received between Zed and the agent.</p>
<p><img src="https://zed.dev/img/acp/acp-logs.webp" alt="The debug view for ACP logs." /></p>
<h2 id="mcp-servers"><a class="header" href="#mcp-servers">MCP Servers</a></h2>
<p>Note that for external agents, access to MCP servers <a href="./mcp.html">installed from Zed</a> may vary depending on the ACP agent implementation.</p>
<p>Regarding the built-in ones, Claude Code and Codex both support it, and Gemini CLI does not yet. In the meantime, learn how to add MCP server support to Gemini CLI through <a href="https://github.com/google-gemini/gemini-cli?tab=readme-ov-file#using-mcp-servers">their documentation</a>.</p>

                        <div class="footer-buttons">
                            <a rel="prev" href="../ai/tools.html" class="footer-button" title="Tools">
                                <i class="fa fa-angle-left"></i>
                                Tools
                            </a>
                            <a rel="next" href="../ai/inline-assistant.html" class="footer-button" title="Inline Assistant">
                                Inline Assistant
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </div>
                    </main>
                    <div class="toc-container">
                        <nav class="pagetoc"></nav>
                    </div>
                    <!-- Immediately detect if page has headins that are not h1 to prevent flicker -->
                    <script>
                        (function() {
                            var tocContainer = document.querySelector('.toc-container');
                            var headers = document.querySelectorAll('.header');
                            var hasNonH1Headers = false;
                            for (var i = 0; i < headers.length; i++) {
                                var parent = headers[i].parentElement;
                                if (parent && !parent.tagName.toLowerCase().startsWith('h1')) {
                                    hasNonH1Headers = true;
                                    break;
                                }
                            }
                            if (hasNonH1Headers) {
                                tocContainer.classList.add('has-toc');
                            } else {
                                tocContainer.classList.add('no-toc');
                            }
                        })();
                    </script>
                </div>
            </div>
        </div>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/page-toc.js"></script>
        <script src="../theme/plugins.js"></script>


        <!-- Amplitude Analytics -->
        <script>
          (function() {
            var amplitudeKey = '';
            if (amplitudeKey && amplitudeKey.indexOf('#') === -1) {
              var script = document.createElement('script');
              script.src = 'https://cdn.amplitude.com/script/' + amplitudeKey + '.js';
              script.onload = function() {
                window.amplitude.init(amplitudeKey, {
                  fetchRemoteConfig: true,
                  autocapture: true
                });
              };
              document.head.appendChild(script);
            }
          })();
        </script>
    </div>
    </body>
</html>
